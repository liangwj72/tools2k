"use strict";(self["webpackChunklib_java_html"]=self["webpackChunklib_java_html"]||[]).push([[4],{16004:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loading?e._e():a("div",[a("el-table",{staticClass:"table-fixed only-header",attrs:{border:""}},[a("div",{attrs:{slot:"empty"},slot:"empty"}),a("el-table-column",{attrs:{label:"ObjectName"}}),a("el-table-column",{attrs:{label:"说明"}}),a("el-table-column",{attrs:{label:"Class"}})],1),e._l(e.list,(function(t,s){return a("div",{key:s},[a("div",{staticClass:"table-caption"},[e._v(" "+e._s(t.name)+" ")]),a("el-table",{staticClass:"table-fixed1",staticStyle:{width:"100%"},attrs:{border:"",showHeader:!1,data:t.beans}},[a("el-table-column",{attrs:{label:"ObjectName"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.view(t.row)}}},[e._v(e._s(t.row.displayName))])]}}],null,!0)}),a("el-table-column",{attrs:{prop:"desc",label:"说明"}}),a("el-table-column",{attrs:{prop:"className",label:"Class"}})],1)],1)}))],2),a("mbean-view")],1)},i=[],n=a(25787),l=a(98054),o=a(62222),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:"MBean详情:"+e.objectName,visible:e.visible,size:"90%"},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"mbean-view"},[a("auto-refresh",{attrs:{timer:!1},on:{refresh:e.reload}}),e.loading?e._e():a("div",[a("attrs-comp",{attrs:{objectName:e.objectName,sendTime:e.sendTime,attrs:e.attrs},on:{refresh:e.reload}}),a("opts-comp",{attrs:{info:e.info},on:{refresh:e.reload}})],1)],1)])},u=[],d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-pannel attr-pannel"},[a("div",{staticClass:"p-header flex-container"},[a("div",{staticClass:"flex1"},[e._v(" 属性 "),a("span",{staticClass:"text-muted"},[e._v(e._s(e._f("timeFormat")(e.sendTime)))])]),a("div",[a("el-button",{attrs:{size:"mini"},on:{click:e.allColumn}},[e._v(e._s(e.showAllColText))])],1)]),a("div",{staticClass:"p-body"},[a("table",{staticClass:"el-table my-table"},[a("thead",[a("tr",[a("th",{directives:[{name:"show",rawName:"v-show",value:e.showAllCol,expression:"showAllCol"}]},[e._v("名字")]),a("th",{attrs:{width:"150"}},[e._v("说明")]),a("th",[e._v("值")])])]),a("tbody",e._l(e.attrs,(function(t,s){return a("tr",{key:s},[a("td",{directives:[{name:"show",rawName:"v-show",value:e.showAllCol,expression:"showAllCol"}]},[a("span",{staticClass:"text-caption"},[e._v(e._s(t.info.name))]),t.info.writable&&!t.info.readable?a("el-tag",{attrs:{type:"warning",size:"mini"}},[e._v("只写 ")]):e._e(),t.info.writable?e._e():a("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("只读 ")]),a("span",{staticClass:"text-muted",attrs:{align:"right"}},[e._v(e._s(t.info.type))])],1),a("td",[e._v(e._s(t.desc))]),a("td",{staticClass:"attr-value"},[t.info.writable&&t.inputable?a("div",["boolean"==t.info.type||"java.lang.Boolean"==t.info.type?a("div",[e._v(" "+e._s(t._value)+" "),a("el-switch",{attrs:{disabled:!t.editMode,"active-value":"true","inactive-value":"false"},model:{value:t._value,callback:function(a){e.$set(t,"_value",a)},expression:"row._value"}}),a("edit-mode",{on:{reset:function(a){return e.resetEditMode(t)},submitChange:function(a){return e.submitChange(t)}},model:{value:t.editMode,callback:function(a){e.$set(t,"editMode",a)},expression:"row.editMode"}})],1):a("div",[a("div",{staticClass:"flex-container"},[a("div",{staticClass:"flex1"},[t.editMode?a("el-input",{attrs:{type:"textarea",rows:3},model:{value:t._value,callback:function(a){e.$set(t,"_value","string"===typeof a?a.trim():a)},expression:"row._value"}}):a("div",{staticClass:"text-primary",domProps:{innerHTML:e._s(t.value)}})],1),a("div",[a("edit-mode",{on:{reset:function(a){return e.resetEditMode(t)},submitChange:function(a){return e.submitChange(t)}},model:{value:t.editMode,callback:function(a){e.$set(t,"editMode",a)},expression:"row.editMode"}})],1)])])]):a("div",[t.jsonValue?a("pre",{domProps:{innerHTML:e._s(t.value)}}):e._e(),t.jsonValue?e._e():a("span",{staticClass:"text-primary",domProps:{innerHTML:e._s(t.value)}})])])])})),0)])])])},c=[],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"edit-btn"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.editMode,expression:"!editMode"}],attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(t){return e.switchToEditMode()}}}),a("el-button-group",{directives:[{name:"show",rawName:"v-show",value:e.editMode,expression:"editMode"}]},[a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.resetProp()}}},[a("i",{staticClass:"el-icon-close"})]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.submitChange()}}},[a("i",{staticClass:"el-icon-check"})])],1)],1)},p=[],h={name:"edit-mode",components:{},props:{value:{type:Boolean,required:!0,default:!1}},data(){return{editMode:!1}},watch:{value(e){this.editMode=e}},computed:{},methods:{switchToEditMode(){this.updateProp(!0)},updateProp(e){this.editMode=e,this.$emit("input",e)},resetProp(){this.updateProp(!1),this.$emit("reset")},submitChange(){this.editMode=!1,this.$emit("submitChange")}}},v=h,b=a(1001),f=(0,b.Z)(v,m,p,!1,null,null,null),_=f.exports,w={name:"mbean-attrs-comp",components:{EditMode:_},props:{attrs:{type:Array,required:!0},objectName:{type:String,required:!0},sendTime:{type:Number,default:0}},data(){return{showAllCol:!1}},computed:{showAllColText:function(){return this.showAllCol?"隐藏名字列":"显示所有列"}},methods:{allColumn(){this.showAllCol=!this.showAllCol},resetEditMode(e){e._value=e.value},submitChange(e){e.editMode=!1;const t={name:e.info.name,objectName:this.objectName,value:e._value};l.Z.ajax(n.Z.jmxInWeb.changeAttr,t,(()=>{this.$emit("refresh",!1)}))},backToList(){this.$router.push("MBeanList")}}},C=w,x=(0,b.Z)(C,d,c,!1,null,null,null),y=x.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-pannel opt-pannel mbean-info-card"},[a("div",{staticClass:"p-header"},[a("span",{staticClass:"text-caption"},[e._v(e._s(e.info.desc))]),a("code",[e._v(e._s(e.info.className))])]),a("div",{staticClass:"p-body"},[a("div",{staticClass:"opt-nav"},[a("ul",e._l(e.info.opts,(function(t){return a("li",{key:t.info.name,staticClass:"text-link",attrs:{index:t.info.name},on:{click:function(a){return e.onNavClick(t)}}},[a("div",{staticClass:"text-wrap",staticStyle:{width:"209px"}},[e._v(" "+e._s(t.info.name)+" "),a("span",{staticClass:"text-muted"},[e._v(e._s(t.info.description))])])])})),0)]),e.showForm?a("div",{staticClass:"opt-forms article"},[a("h4",[a("span",{staticClass:"label label-success"},[e._v(e._s(e.curOpt.info.returnType))]),a("span",{staticClass:"text-caption"},[e._v(e._s(e.curOpt.info.name))])]),a("div",{staticClass:"text-muted"},[e._v(" 备注: "+e._s(e.curOpt.info.description)+" ")]),a("hr"),a("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.onSubmitOpt.apply(null,arguments)}}},[e._l(e.curOpt.params,(function(t){return a("el-form-item",{key:t.info.name,attrs:{label:t.info.name}},["boolean"===t.info.type?a("div",[a("el-switch",{attrs:{"active-value":"true","inactive-value":"false"},model:{value:t.defaultValue,callback:function(a){e.$set(t,"defaultValue",a)},expression:"param.defaultValue"}})],1):a("div",[a("el-input",{attrs:{size:"small",type:"textarea",clearable:""},model:{value:t.defaultValue,callback:function(a){e.$set(t,"defaultValue","string"===typeof a?a.trim():a)},expression:"param.defaultValue"}})],1),a("div",[a("span",{staticClass:"label label-success"},[e._v(e._s(t.info.type))]),a("span",{staticClass:"text-muted"},[e._v(" "+e._s(t.info.description))])])])})),a("el-button",{attrs:{type:"primary",nativeType:"submit"}},[e._v("执行 ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.returnData.show,expression:"returnData.show"}]},[a("br"),a("div",{staticClass:"my-header"},[a("span",[e._v("执行返回结果")])]),a("pre",[e._v(e._s(e.returnData.data)+"\n          ")])])],2)],1):e._e()])])},g=[],j={name:"opts-comp",props:{info:{type:Object,required:!0}},data(){return{showForm:!1,curOpt:{},returnData:{hasReturn:!1,data:"",show:!1}}},computed:{},activated(){this.showForm=!1,this.curOpt={}},methods:{onNavClick(e){this.showForm=!0,this.curOpt=e,console.debug("-------",this.curOpt)},onSubmitOpt(){const e={objectName:this.info.objectName,optName:this.curOpt.info.name,paramType:[],paramValue:[]};for(let t of this.curOpt.params)e.paramType.push(t.info.type),e.paramValue.push(t.defaultValue);console.debug("执行mbean 方法",e),this.returnData.hasReturn=!1,this.returnData.data="",l.Z.ajax(n.Z.jmxInWeb.invokeOpt,e,(t=>{l.Z.showMsg(`执行 ${e.optName} 成功`),this.returnData.hasReturn=t.hasReturn,this.returnData.data=t.returnData,this.returnData.show=t.hasReturn,this.$emit("refresh",!1)}))}}},N=j,k=(0,b.Z)(N,M,g,!1,null,null,null),$=k.exports,T={name:"mbean-detail",components:{OptsComp:$,AttrsComp:y},props:{},mounted(){this.$eventBus.$off(o.Z.eventName.showMBeanDetail),this.$eventBus.$on(o.Z.eventName.showMBeanDetail,(({objectName:e})=>{console.debug(`showMBeanDetail 事件: objectName=${e}`),this.visible=!0,this.loading=!0,this.objectName=e,this.reload(!1)}))},data(){return{visible:!1,showAllCol:!1,loading:!1,attrs:[],sendTime:0,objectName:"",info:{}}},computed:{showAllColText:function(){return this.showAllCol?"隐藏名字列":"显示所有列"}},methods:{reload(e){console.debug("刷新 mbean:",this.objectName);const t={objectName:this.objectName};l.Z.ajax(n.Z.jmxInWeb.getMBeanInfo,t,(t=>{this.onDateLoad(t.info),this.sendTime=t.sendTime,this.loading=!1,e&&l.Z.showMsg("刷新成功")}))},onDateLoad(e){for(let t of e.attrs)this.addEditModeData(t);this.attrs=e.attrs,this.objectName=e.objectName,this.info=e},addEditModeData(e){e.editMode=!1,e._value=e.value}}},D=T,O=(0,b.Z)(D,r,u,!1,null,null,null),Z=O.exports,A={components:{MbeanView:Z},data(){return{list:[],loading:!1}},computed:{},activated(){this.reloadList()},methods:{reloadList(){console.debug("加载MBean列表"),this.loading=!0;const e=this;l.Z.ajax(n.Z.jmxInWeb.getMBeanList,{},(function(t){e.list=t.list,e.loading=!1}))},view(e){console.debug(`点击查看MBean详情 , objname=${e.objectName}`),o.Z.showMBeanDetail(e.objectName)}}},B=A,E=(0,b.Z)(B,s,i,!1,null,null,null),V=E.exports}}]);