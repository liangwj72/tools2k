"use strict";(self["webpackChunklib_java_html"]=self["webpackChunklib_java_html"]||[]).push([[700],{55700:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-keys"},[e.loading?e._e():a("div",[a("div",{staticClass:"my-pannel keys-pannel"},[a("div",{staticClass:"p-header flex-container"},[a("div",{staticClass:"flex1"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.reload(!1)}}},[a("el-input",{attrs:{size:"small",clearable:!0,placeholder:"请输入搜索关键字"},model:{value:e.searchArea.form.key,callback:function(t){e.$set(e.searchArea.form,"key","string"===typeof t?t.trim():t)},expression:"searchArea.form.key"}},[a("div",{attrs:{slot:"append"},slot:"append"},[a("el-button",{attrs:{size:"small",nativeType:"submit",icon:"el-icon-search"}})],1)])],1)]),a("div",[a("el-button",{staticClass:"refresh-btn",attrs:{size:"small"},on:{click:function(t){return e.reload(!0)}}},[e._v("刷新 ")])],1)]),a("div",{staticClass:"p-body has-footer"},e._l(e.searchArea.keyList,(function(t,i){return a("div",{key:i,staticClass:"key-row text-link",on:{click:function(a){return e.viewKey(t)}}},[a("div",{staticClass:"key-name",domProps:{innerHTML:e._s(t.keyWithMark)}}),a("div",{staticClass:"key-value"},[e._v(e._s(t.valueSummary))])])})),0),a("div",{staticClass:"p-footer"},[a("el-pagination",{attrs:{background:"",small:"","current-page":e.searchArea.form.pageNo,"page-sizes":[10,20,30],"page-size":e.searchArea.form.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.searchArea.itemTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])]),a("div",{staticClass:"my-pannel edit-pannel"},[a("el-tabs",{model:{value:e.editArea.activeTab,callback:function(t){e.$set(e.editArea,"activeTab",t)},expression:"editArea.activeTab"}},[a("el-tab-pane",{attrs:{label:"导入/导出",name:"file"}},[a("h4",[e._v("导入/导出")]),a("hr"),a("el-form",{attrs:{"label-width":"100px"},nativeOn:{submit:function(t){return t.preventDefault(),e.submitImport.apply(null,arguments)}}},[a("el-form-item",{attrs:{label:"导入"}},[a("div",[e._v("请选择要导入的XML文件")]),a("input",{attrs:{type:"file",required:"",accept:"text/xml",capture:"camera"},on:{change:function(t){return e.fileSelectd(t.target.files)}}}),a("div",[a("el-checkbox",{model:{value:e.fileArea.form.cleanOld,callback:function(t){e.$set(e.fileArea.form,"cleanOld",t)},expression:"fileArea.form.cleanOld"}},[e._v("导入时清除原来的所有内容")])],1),a("div",[a("el-button",{staticClass:"w100",attrs:{nativeType:"submit",type:"success"}},[e._v("导入 ")])],1)]),a("hr"),a("el-form-item",{attrs:{label:"导出"}},[a("p",[e._v('从上传的文件导入数据之前，建议先导出一次作为备份。请用"右键另存为"来保存文件。')]),a("a",{attrs:{href:"/dict/export/dict.xml",target:"_blank"}},[e._v("导出xml文件")])]),a("hr"),a("el-form-item",[a("p",[e._v("添加新的key给前端使用。")]),a("el-button",{staticClass:"w100",attrs:{type:"warning"},on:{click:function(t){return e.switchToNewKey(!0)}}},[e._v("新建Key ")])],1)],1)],1),a("el-tab-pane",{attrs:{label:e.editArea.tabName,name:"edit"}},[a("h4",[e._v(e._s(e.editArea.tabName))]),a("hr"),a("el-form",{attrs:{"label-width":"100px"},nativeOn:{submit:function(t){return t.preventDefault(),e.submitSave.apply(null,arguments)}}},[e.editArea.newMode?a("el-form-item",{attrs:{label:"Key"}},[a("el-input",{attrs:{required:"",placeholder:"请输入KEY"},model:{value:e.editArea.form.key,callback:function(t){e.$set(e.editArea.form,"key","string"===typeof t?t.trim():t)},expression:"editArea.form.key"}})],1):a("el-form-item",{attrs:{label:"Key"}},[a("div",{staticClass:"text-caption"},[e._v(e._s(e.editArea.form.key))])]),a("el-form-item",{attrs:{label:"Key的内容"}},[a("el-input",{attrs:{required:"",placeholder:"请输入KEY的内容",rows:4,type:"textarea"},model:{value:e.editArea.form.value,callback:function(t){e.$set(e.editArea.form,"value","string"===typeof t?t.trim():t)},expression:"editArea.form.value"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入备注",type:"textarea"},model:{value:e.editArea.form.memo,callback:function(t){e.$set(e.editArea.form,"memo","string"===typeof t?t.trim():t)},expression:"editArea.form.memo"}})],1),a("el-form-item",[a("el-button",{staticClass:"w100",attrs:{nativeType:"submit",type:"success"}},[e._v("保存 ")]),e.editArea.newMode?e._e():a("el-button",{staticClass:"w100",attrs:{type:"danger"},on:{click:e.deleteKey}},[e._v("删除 ")]),e.editArea.newMode?e._e():a("el-button",{staticClass:"w100",attrs:{type:"warning"},on:{click:function(t){return e.switchToNewKey(!0)}}},[e._v("新建Key ")])],1)],1)],1)],1)],1)])},r=[],l=(a(74916),a(64765),a(77959)),n=a(98054),s={components:{},props:{},data:function(){return{loading:!1,searchArea:{form:{key:"",pageNo:1,pageSize:10},itemTotal:0,keyList:[]},editArea:{activeTab:"",newMode:!0,tabName:"",curKey:{},form:{html:!1,key:"",memo:"",type:0,value:""}},fileArea:{form:{cleanOld:!1,file:null}}}},computed:{},activated:function(){this.loading=!0,this.reload(!1),this.switchToNewKey(!0)},methods:{reload:function(e){var t=this,a=this.searchArea;n.Z.ajax(l.Z.dictManager.search,a.form,(function(a){t.onListData(a),t.loading=!1,e&&n.Z.showMsg("刷新成功")}))},onListData:function(e){var t=this.searchArea;t.keyList=e.list,t.itemTotal=e.itemTotal,t.form.pageNo=e.pageNo,t.form.pageSize=e.pageSize},handleSizeChange:function(e){this.searchArea.form.pageSize=e,this.reload(!1)},handleCurrentChange:function(e){this.searchArea.form.pageNo=e,this.reload(!1)},viewKey:function(e){this.switchToNewKey(!1),this.editArea.curKey=e;var t=this.editArea.form;t.key=e.key,t.value=e.value,t.memo=e.memo},switchToNewKey:function(e){var t=this.editArea;if(t.newMode=e,e){t.tabName="新建";var a=t.form;a.key="",a.memo="",a.value=""}else t.tabName="编辑";t.activeTab="edit"},fileSelectd:function(e){var t=e.length;t>0&&(this.fileArea.form.file=e[0])},submitSave:function(){var e=this;n.Z.ajax(l.Z.dictManager.save,this.editArea.form,(function(t){e.onListData(t),e.editArea.newMode=!1,n.Z.showMsg("保存成功")}))},deleteKey:function(){var e=this,t=this.editArea.form.key;n.Z.confirm("确认删除<code>".concat(t,"</code>吗"),(function(){n.Z.ajax(l.Z.dictManager["delete"],{key:t},(function(t){e.onListData(t),e.switchToNewKey(!0),n.Z.showMsg("删除成功")}))}))},submitImport:function(){var e=this,t=new FormData;t.append("cleanOld",this.fileArea.form.cleanOld),t.append("file",this.fileArea.form.file),n.Z.ajax(l.Z.dictManager.importXml,t,(function(){e.reload(!1),n.Z.showMsg("导入成功")}))}}},o=s,c=a(1001),m=(0,c.Z)(o,i,r,!1,null,null,null),u=m.exports}}]);