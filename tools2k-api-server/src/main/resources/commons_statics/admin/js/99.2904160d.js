"use strict";(self["webpackChunklib_java_html"]=self["webpackChunklib_java_html"]||[]).push([[99],{86099:function(t,a,s){s.r(a),s.d(a,{default:function(){return r}});var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"ws-conns"},[s("auto-refresh",{on:{refresh:t.reload}}),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[s("div",{staticClass:"my-pannel summary-pannel"},[s("div",{staticClass:"flex-container"},[s("h4",{staticClass:"flex1"},[t._v("汇总信息")]),s("el-button",{attrs:{size:"mini"},on:{click:t.resetCounter}},[t._v(" 重置计数器 ")])],1),s("hr"),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"info-label"},[t._v("总连接数:")]),s("div",{staticClass:"info-value"},[t._v(t._s(t._f("numFormat")(t.totalConnectCount)))])]),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"info-label"},[t._v("总登录用户数")]),s("div",{staticClass:"info-value"},[t._v(t._s(t._f("numFormat")(t.totalUserCount)))])]),s("br"),s("h4",[t._v("请求信息")]),s("hr"),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"info-label"},[t._v("请求次数")]),s("div",{staticClass:"info-value"},[t._v(t._s(t._f("numFormat")(t.upCounter.count)))])]),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"info-label"},[t._v("平均耗时(微秒)")]),s("div",{staticClass:"info-value"},[t._v(t._s(t._f("numFormat")(t.upCounter.timeAvg/1e3)))])]),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"info-label"},[t._v("平均带宽")]),s("div",{staticClass:"info-value"},[t._v(t._s(t._f("sizeToM")(t.upCounter.payloadAvg)))])]),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"info-label"},[t._v("总带宽")]),s("div",{staticClass:"info-value"},[t._v(t._s(t._f("sizeToM")(t.upCounter.payloadTotal)))])]),s("br"),s("h4",[t._v("消息发送")]),s("hr"),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"info-label"},[t._v("发送次数")]),s("div",{staticClass:"info-value"},[t._v(t._s(t._f("numFormat")(t.downCounter.count)))])]),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"info-label"},[t._v("平均耗时(微秒)")]),s("div",{staticClass:"info-value"},[t._v(t._s(t._f("numFormat")(t.downCounter.timeAvg/1e3)))])]),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"info-label"},[t._v("平均带宽")]),s("div",{staticClass:"info-value"},[t._v(t._s(t._f("sizeToM")(t.downCounter.payloadAvg)))])]),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"info-label"},[t._v("总带宽")]),s("div",{staticClass:"info-value"},[t._v(t._s(t._f("sizeToM")(t.downCounter.payloadTotal)))])])]),s("div",{staticClass:"my-pannel conns-pannel"},[s("div",{staticClass:"p-header"},[t._v("当前连接信息 "),s("small",{staticClass:"text-muted"},[t._v(t._s(t._f("dateFormat")(t.updateTime)))])]),s("div",{staticClass:"p-body"},[s("table",{staticClass:"el-table my-table"},[t._m(0),s("tbody",t._l(t.list,(function(a,i){return s("tr",{key:i},[s("td",[t._v(" "+t._s(a.sessionId)+" ")]),s("td",[a.userLogined?s("div",[s("el-tooltip",{attrs:{content:a.userClassName,placement:"top",effect:"light"}},[s("el-button",{attrs:{size:"mini"}},[t._v(t._s(a.userAccount))])],1)],1):t._e()]),s("td",[t._v(" "+t._s(a.ipAddress)+" ")]),s("td",[t._v(t._s(a.connectTime.full))]),s("td",[t._v(t._s(a.lastRequestTime.full))]),s("td",{staticClass:"num"},[t._v(t._s(t._f("numFormat")(a.upCounter.count)))]),s("td",{staticClass:"num"},[t._v(t._s(t._f("numFormat")(a.lastUpCountDiff)))]),s("td",{staticClass:"num"},[a.upCounter.count>0?s("span",[t._v(" "+t._s((a.upCounter.timeAvg/1e3/1e3).toFixed(2))+" ms ")]):t._e()])])})),0)])])])])],1)},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",[t._v("SessionId")]),s("th",[t._v("用户")]),s("th",[t._v("ip")]),s("th",{attrs:{width:"155px"}},[t._v("连接时间")]),s("th",{attrs:{width:"155px"}},[t._v("最后消息")]),s("th",{attrs:{width:"120px"}},[t._v("请求总数")]),s("th",{attrs:{width:"120px"}},[t._v("最后10秒请求")]),s("th",{attrs:{width:"100px"}},[t._v("平均处理时间")])])])}],n=s(25787),l=s(98054),o={components:{},data(){return{loading:!1,updateTime:new Date,downCounter:{count:0,payloadAvg:0,payloadMax:0,payloadMin:0,payloadTotal:0,timeAvg:0,timeMax:0,timeMin:0,timeTotal:0},list:[],totalConnectCount:0,totalUserCount:0,upCounter:{count:0,payloadAvg:0,payloadMax:0,payloadMin:0,payloadTotal:0,timeAvg:0,timeMax:0,timeMin:0,timeTotal:0}}},computed:{},activated(){this.loading=!0,this.reload(!1)},methods:{reload(t){l.Z.ajax(n.Z.commonRuntime.wsConnectList,{},(a=>{this.loading=!1,this.downCounter=a.downCounter,this.upCounter=a.upCounter,this.list=a.list,this.totalConnectCount=a.totalConnectCount,this.totalUserCount=a.totalUserCount,this.updateTime=new Date,t&&l.Z.showMsg("刷新成功")}))},resetCounter(){l.Z.ajax(n.Z.commonRuntime.wsResetCounter,{},(()=>{this.reload(!1),l.Z.showMsg("重置成功")}))}}},v=o,u=s(1001),d=(0,u.Z)(v,i,e,!1,null,null,null),r=d.exports}}]);